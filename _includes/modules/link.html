{% assign link = include.link %}
{% assign label = include.label %}

{% if link.value.url %}

  {% capture linkUrl %}
    {% case link.type %}

      {% when "Link.web" %}
        {% assign isExternalLink = true %}
        {{ link.value.url }}

      {% when "Link.document" %}
        {% if link.value.document.type == "case-studies" %}
          {{base}}/work/{{link.value.document.uid}}
        {% else %}
          {{base}}/{{link.value.document.uid}}
        {% endif %}

    {% endcase %}
  {% endcapture %}

  {% capture linkTarget %}
    {% if isExternalLink %}
      target="_blank"
    {% endif %}
  {% endcapture %}

  {% capture linkLabel %}
    {% if label %}
      title="{{ label }}"
    {% endif %}
  {% endcapture %}

  <a class="link" href="{{ linkUrl | normalize_whitespace }}" {{ linkTarget | normalize_whitespace }} {{ linkLabel | normalize_whitespace }} >
    <span> {{ label | default: "View" }} </span>
  </a>
{% endif %}
